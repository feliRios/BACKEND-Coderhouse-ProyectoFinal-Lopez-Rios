

<script>
    document.addEventListener("DOMContentLoaded", () => {
        const buyButtons = document.querySelectorAll('.buy-btn');
        buyButtons.forEach(button => {
            button.addEventListener('click', async (event) => {
                const productId = button.dataset.productId;
                const cartId = button.dataset.cartId; 

                try {
                    const response = await fetch(`/api/carts/${cartId}/product/${productId}`, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                    });
                    const result = await response.json();
                    Toastify({
                    text: result.message,
                    className: result.success ? "success" : "error",
                    newWindow: true,
                    style: {
                        background: result.success ? "rgba(43, 69, 186, 0.2)" : "rgba(255, 0, 0, 0.2)",
                        border: result.success ? "1px solid #2b45ba" : "1px solid #C52222",
                        borderRadius: "10px",
                        fontSize: "12px",
                    },
                }).showToast();
                } catch (error) {
                    console.error('Error al agregar producto al carrito:', error);
                }
            });
        });
    });
</script>

